/*! ezappx-plugin-ajaxdemo - 0.0.11 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["ezappx-plugin-ajaxdemo"]=t():e["ezappx-plugin-ajaxdemo"]=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EZAPPX_COMPONENT_TYPE="ezappx-component-type"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=s(n(2)),i=s(n(3)),r=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o({},t);(0,a.default)(e,n),(0,i.default)(e,n),(0,r.default)(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(0);t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.DomComponents,n=t.getType("default"),i=n.model,r=n.view;t.addType("defualtContent",{model:i.extend({defaults:o({},i.prototype.defaults,{traits:[{type:"content",label:"Text",name:"text"},{type:"text",label:"Id",name:"id"}]})}),view:r});var s=t.getType("defualtContent"),c=s.model,l=s.view;t.addType("es-ajax",{model:c.extend({init:function(){this.setAttributes({class:"col button","target-div":"Id","target-url":"http://10.109.252.77:8800/","request-type":"GET"})},defaults:o({},c.prototype.defaults,{script:function(){$(this).click(function(e){console.log($(e.target).attr("request-type")+" "+$(e.target).attr("target-url")),$.ajax({url:$(e.target).attr("target-url"),type:$(e.target).attr("request-type"),timeout:3e3,contentType:"application/json;",dataType:"json",crossDomain:!0,success:function(e){console.log("Ezappx builder server memory status: "+JSON.stringify(e)),app.notification.create({icon:'<i class="icon demo-icon"></i>',title:"Ezappx",titleRightText:"now",subtitle:"Server used memory: "+e.used,text:"Server total memory: "+e.total,closeTimeout:3e3}).open()},error:function(e,t,n){console.error(e),app.notification.create({icon:'<i class="icon demo-icon"></i>',title:"Ezappx",titleRightText:"now",subtitle:"Ajax error",text:JSON.stringify(e),closeTimeout:3e3}).open()}})})},traits:c.prototype.defaults.traits.concat([{type:"class",label:"Style",name:"class",options:[{value:"",name:"Default"},{value:"button-fill",name:"Fill"},{value:"button-raised",name:"Raised"}]},{type:"text",label:"Target url",name:"target-url"},{type:"text",label:"Target div",name:"target-div"},{type:"select",label:"Reqeust type",name:"request-type",options:[{value:"GET",name:"GET"},{value:"POST",name:"POST"}]}])})},{isComponent:function(e){if("es-ajax"==$(e).attr(a.EZAPPX_COMPONENT_TYPE))return{type:"es-ajax"}}}),view:l}),t.addType("es-push-service",{model:i.extend({init:function(){console.log("model",this),this.listenTo(this,"change:server",this.changeServer),this.setAttributes({server:"http://push.ezappx.com/gs-guide-websocket",channel:"/topic/greetings"})},changeServer:function(){console.log("change to",this.get("server"))},defaults:o({},i.prototype.defaults,{traits:["server","channel"],script:function(){var e=$(this),t=e.attr("server"),n=e.attr("channel"),o=new SockJS(t);stompClient=Stomp.over(o),stompClient.connect({Origin:"test"},function(e){console.log("Connected: "+e),stompClient.subscribe(n,function(e){app.notification.create({icon:'<i class="icon demo-icon"></i>',title:"Ezappx",titleRightText:"now",subtitle:"Received msg: "+JSON.parse(e.body).content,text:"This message was created at ("+JSON.parse(e.body).createAt+")",closeTimeout:3e3}).open()})})}})},{isComponent:function(e){if("es-push-service"==$(e).attr(a.EZAPPX_COMPONENT_TYPE))return{type:"es-push-service"}}}),view:n.view.extend({init:function(){console.log("view",this)}})}),t.addType("es-tencent-map",{model:i.extend({init:function(){console.log("es-tencent-map model",this),this.setAttributes({key:"2VMBZ-JXJRP-A6MDS-VOUUP-7WKSH-ZNFXX"})},defaults:o({},i.prototype.defaults,{traits:["key"],script:function(){if($(this).append('<div id = "tencent-map-container" style="min-width: 100%;min-height: 100%;"></div>'),window.initTencentMap=function(){var e={zoom:8,center:new qq.maps.LatLng(39.91485,116.403765),mapTypeId:qq.maps.MapTypeId.ROADMAP},t=new qq.maps.Map(document.getElementById("tencent-map-container"),e);new qq.maps.ScaleControl({align:qq.maps.ALIGN.BOTTOM_LEFT,margin:qq.maps.Size(85,15),map:t});qq.maps.event.addListener(t,"click",function(e){console.log("您点击的位置为:["+e.latLng.getLng()+","+e.latLng.getLat()+"]")}),console.log("已渲染腾讯地图")},"undefined"==typeof qq){console.log("导入腾讯地图JS");var e=document.createElement("script");e.type="text/javascript",e.src="https://map.qq.com/api/js?v=2.exp&key="+$(this).attr("key")+"&callback=initTencentMap",document.body.appendChild(e)}}})},{isComponent:function(e){if("es-tencent-map"==$(e).attr(a.EZAPPX_COMPONENT_TYPE))return{type:"es-tencent-map"}}}),view:n.view})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.BlockManager;t.add("es-ajax",{label:"Ajax",attributes:{class:"fa fa-cloud"},category:"External Service",content:"\n            <button "+o.EZAPPX_COMPONENT_TYPE+"='es-ajax'>Button</button>\n            "}),t.add("es-push-service",{label:"Push Service",attributes:{class:"fa fa-bell"},category:"External Service",content:{type:"es-push-service",style:{width:"100%",height:"50px"}}}),t.add("es-tencent-map",{label:"Tencent Map",attributes:{class:"fa fa-map"},category:"External Service",content:{type:"es-tencent-map",style:{width:"100%",height:"500px"}}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.TraitManager.getType("text")}}])});
//# sourceMappingURL=ezappx-plugin-ajaxdemo.min.js.map